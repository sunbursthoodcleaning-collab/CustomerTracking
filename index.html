<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUNBURST Hood Cleaning - Customer Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-orange: #FF6B35;
            --secondary-orange: #F7931E;
            --dark-blue: #2c3e50;
            --light-gray: #f8f9fa;
            --border-gray: #e1e8ed;
            --text-gray: #666;
            --success-green: #28a745;
            --warning-yellow: #ffc107;
            --danger-red: #dc3545;
            --shadow-light: 0 5px 15px rgba(0,0,0,0.1);
            --shadow-medium: 0 10px 25px rgba(0,0,0,0.1);
            --shadow-heavy: 0 20px 40px rgba(0,0,0,0.1);
            --border-radius: 10px;
            --border-radius-large: 20px;
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--secondary-orange) 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark-blue);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: var(--border-radius-large);
            box-shadow: var(--shadow-heavy);
            overflow: hidden;
            position: relative;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border-gray);
            border-top: 4px solid var(--primary-orange);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header {
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--secondary-orange) 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            50% { transform: translate(-50%, -50%) rotate(180deg); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
            position: relative;
            z-index: 2;
        }

        .header p {
            opacity: 0.95;
            font-size: 1.2em;
            position: relative;
            z-index: 2;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            color: white;
            font-weight: 600;
            z-index: 10000;
            transform: translateX(400px);
            transition: var(--transition);
            box-shadow: var(--shadow-medium);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { background: var(--success-green); }
        .notification.error { background: var(--danger-red); }
        .notification.warning { background: var(--warning-yellow); color: var(--dark-blue); }

        .main-content {
            padding: 40px;
        }

        .tabs {
            display: flex;
            margin-bottom: 40px;
            border-bottom: 3px solid var(--light-gray);
            position: relative;
        }

        .tab {
            padding: 18px 30px;
            background: var(--light-gray);
            border: none;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            margin-right: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-gray);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .tab::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-orange);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .tab:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .tab.active {
            background: var(--primary-orange);
            color: white;
            box-shadow: var(--shadow-light);
        }

        .tab.active::before {
            transform: scaleX(1);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--shadow-medium);
            border-left: 5px solid var(--primary-orange);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 107, 53, 0.05) 0%, transparent 70%);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .stat-card:hover::before {
            transform: scale(1.2);
        }

        .stat-number {
            font-size: 3em;
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .stat-label {
            color: var(--text-gray);
            font-weight: 600;
            font-size: 1.1em;
            position: relative;
            z-index: 2;
        }

        .form-section {
            background: var(--light-gray);
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            border-left: 5px solid var(--primary-orange);
            position: relative;
        }

        .form-section h2 {
            color: var(--dark-blue);
            margin-bottom: 25px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
        }

        .form-section h2::before {
            content: "üìã";
            margin-right: 12px;
            font-size: 1.2em;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .form-group {
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-blue);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
            background: white;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-orange);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
            transform: translateY(-2px);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--secondary-orange) 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-light);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: var(--transition);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.4);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
        }

        .btn-secondary:hover {
            box-shadow: 0 8px 20px rgba(108, 117, 125, 0.4);
        }

        .btn-small {
            padding: 10px 20px;
            font-size: 14px;
        }

        .btn-danger {
            background: var(--danger-red);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 0 8px 20px rgba(220, 53, 69, 0.4);
        }

        .search-filter {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
            background: var(--light-gray);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
        }

        .search-input {
            flex: 1;
            min-width: 250px;
        }

        .filter-select {
            min-width: 180px;
        }

        .customer-grid {
            display: grid;
            gap: 25px;
            margin-top: 25px;
        }

        .customer-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow-medium);
            border-left: 5px solid var(--border-gray);
            position: relative;
            transition: var(--transition);
            overflow: hidden;
        }

        .customer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.02) 0%, transparent 50%);
            opacity: 0;
            transition: var(--transition);
        }

        .customer-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .customer-card:hover::before {
            opacity: 1;
        }

        .customer-card.due-soon {
            border-left-color: var(--warning-yellow);
            background: linear-gradient(135deg, #fff8e1 0%, #ffffff 100%);
        }

        .customer-card.due-now {
            border-left-color: var(--secondary-orange);
            background: linear-gradient(135deg, #fff4e6 0%, #ffffff 100%);
        }

        .customer-card.overdue {
            border-left-color: var(--danger-red);
            background: linear-gradient(135deg, #ffebee 0%, #ffffff 100%);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: var(--shadow-medium); }
            50% { box-shadow: 0 10px 25px rgba(220, 53, 69, 0.3); }
        }

        .status-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 3;
        }

        .status-badge.green {
            background: var(--success-green);
            color: white;
        }

        .status-badge.yellow {
            background: var(--warning-yellow);
            color: var(--dark-blue);
        }

        .status-badge.red {
            background: var(--danger-red);
            color: white;
        }

        .customer-info {
            position: relative;
            z-index: 2;
        }

        .customer-info h3 {
            color: var(--dark-blue);
            margin-bottom: 15px;
            font-size: 1.4em;
            font-weight: 700;
        }

        .customer-info p {
            margin-bottom: 10px;
            color: var(--text-gray);
            line-height: 1.5;
        }

        .customer-info strong {
            color: var(--dark-blue);
            font-weight: 600;
        }

        .service-notification {
            background: linear-gradient(135deg, var(--light-gray) 0%, #ffffff 100%);
            padding: 15px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-orange);
            margin: 15px 0;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .service-notification::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-orange);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 5px var(--primary-orange); }
            to { box-shadow: 0 0 15px var(--primary-orange); }
        }

        .service-notification strong {
            color: var(--primary-orange);
            display: flex;
            align-items: center;
        }

        .customer-actions {
            margin-top: 25px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-gray);
        }

        .empty-state .icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: var(--dark-blue);
        }

        .empty-state p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 2em;
            }

            .main-content {
                padding: 20px;
            }

            .tabs {
                flex-direction: column;
                gap: 5px;
            }

            .tab {
                margin-right: 0;
                border-radius: var(--border-radius);
            }

            .form-row {
                grid-template-columns: 1fr;
            }
            
            .search-filter {
                flex-direction: column;
                align-items: stretch;
            }
            
            .customer-actions {
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stat-number {
                font-size: 2.5em;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .customer-card {
                padding: 20px;
            }

            .status-badge {
                position: static;
                display: inline-block;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
    </div>

    <div class="notification" id="notification"></div>

    <div class="container">
        <div class="header">
            <h1>üè¢ SUNBURST Hood Cleaning, LLC</h1>
            <p>Professional Customer Management System</p>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" data-tab="dashboard">üìä Dashboard</button>
                <button class="tab" data-tab="customers">üë• All Customers</button>
                <button class="tab" data-tab="add-customer">‚ûï Add Customer</button>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalCustomers">0</div>
                        <div class="stat-label">Total Customers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="dueSoon">0</div>
                        <div class="stat-label">Due in 30 Days</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="dueNow">0</div>
                        <div class="stat-label">Due This Month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="overdue">0</div>
                        <div class="stat-label">Overdue</div>
                    </div>
                </div>

                <h2 style="margin-bottom: 25px; color: var(--dark-blue); font-size: 1.8em;">üö® Urgent Attention Needed</h2>
                <div id="urgentCustomers" class="customer-grid"></div>
            </div>

            <!-- All Customers Tab -->
            <div id="customers" class="tab-content">
                <div class="search-filter">
                    <input type="text" class="search-input" id="searchInput" placeholder="üîç Search customers by name, business, or city...">
                    <select class="filter-select" id="statusFilter">
                        <option value="">All Status</option>
                        <option value="green">‚úÖ Current</option>
                        <option value="yellow">‚ö†Ô∏è Due Soon</option>
                        <option value="red">üö® Overdue</option>
                    </select>
                    <select class="filter-select" id="businessTypeFilter">
                        <option value="">All Business Structures</option>
                        <option value="standalone-restaurant">Standalone Restaurant</option>
                        <option value="strip-mall">Strip Mall</option>
                        <option value="shopping-center">Shopping Center</option>
                        <option value="mall-food-court">Mall Food Court</option>
                        <option value="high-rise-building">High-Rise Building</option>
                        <option value="food-truck">Food Truck</option>
                        <option value="hotel-restaurant">Hotel Restaurant</option>
                        <option value="hospital-cafeteria">Hospital/Medical</option>
                        <option value="school-cafeteria">School</option>
                        <option value="corporate-cafeteria">Corporate</option>
                        <option value="other-structure">Other</option>
                    </select>
                    <select class="filter-select" id="cuisineTypeFilter">
                        <option value="">All Cuisine Types</option>
                        <option value="american">American</option>
                        <option value="bbq">BBQ</option>
                        <option value="burgers-fries">Burgers & Fries</option>
                        <option value="pizza">Pizza</option>
                        <option value="italian">Italian</option>
                        <option value="chinese">Chinese</option>
                        <option value="japanese">Japanese/Sushi</option>
                        <option value="mexican">Mexican</option>
                        <option value="caribbean">Caribbean</option>
                        <option value="cuban">Cuban</option>
                        <option value="seafood">Seafood</option>
                        <option value="sports-bar">Sports Bar/Tavern</option>
                        <option value="fusion">Fusion</option>
                        <option value="other-cuisine">Other</option>
                    </select>
                </div>
                <div id="allCustomers" class="customer-grid"></div>
            </div>

            <!-- Add Customer Tab -->
            <div id="add-customer" class="tab-content">
                <div id="customerForm">
                    <div class="form-section">
                        <h2>Basic Information</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="businessName">Business Name *</label>
                                <input type="text" id="businessName" required placeholder="Enter business name">
                            </div>
                            <div class="form-group">
                                <label for="contactName">Contact Name *</label>
                                <input type="text" id="contactName" required placeholder="Enter contact person name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contactPhone">Phone Number *</label>
                                <input type="tel" id="contactPhone" required placeholder="(305) 123-4567" pattern="[\(\)\s\-0-9]{10,17}" minlength="10" maxlength="17" title="Please enter a valid phone number">
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email Address</label>
                                <input type="email" id="contactEmail" placeholder="contact@business.com">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="address">Street Address *</label>
                            <input type="text" id="address" required placeholder="123 Main Street">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="suiteNumber">Suite/Unit Number</label>
                                <input type="text" id="suiteNumber" placeholder="Suite 100, Unit B, etc.">
                            </div>
                            <div class="form-group">
                                <label for="city">City *</label>
                                <input type="text" id="city" required placeholder="Enter city">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="state">State *</label>
                                <input type="text" id="state" required value="FL" readonly style="background-color: #f8f9fa; color: #666;">
                            </div>
                            <div class="form-group">
                                <label for="zipCode">ZIP Code *</label>
                                <input type="tel" id="zipCode" required placeholder="33139" pattern="[0-9]{5}(-[0-9]{4})?" minlength="5" maxlength="10" title="Please enter a valid ZIP code (12345 or 12345-6789)">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Business Details</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="businessType">Business Structure *</label>
                                <select id="businessType" required>
                                    <option value="">Select Business Structure</option>
                                    <option value="standalone-restaurant">Standalone Restaurant</option>
                                    <option value="strip-mall">Strip Mall Location</option>
                                    <option value="shopping-center">Shopping Center</option>
                                    <option value="mall-food-court">Mall Food Court</option>
                                    <option value="high-rise-building">High-Rise Building</option>
                                    <option value="food-truck">Food Truck/Trailer</option>
                                    <option value="hotel-restaurant">Hotel Restaurant</option>
                                    <option value="resort-dining">Resort Dining</option>
                                    <option value="hospital-cafeteria">Hospital/Medical Facility</option>
                                    <option value="school-cafeteria">School Cafeteria</option>
                                    <option value="corporate-cafeteria">Corporate Cafeteria</option>
                                    <option value="church-kitchen">Church/Community Kitchen</option>
                                    <option value="catering-facility">Catering Facility</option>
                                    <option value="sports-venue">Sports Venue/Stadium</option>
                                    <option value="airport-dining">Airport Dining</option>
                                    <option value="gas-station">Gas Station/Convenience</option>
                                    <option value="other-structure">Other Structure</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cuisineType">Cuisine/Theme Type</label>
                                <select id="cuisineType">
                                    <option value="">Select Cuisine Type (Optional)</option>
                                    <option value="american">American</option>
                                    <option value="bbq">BBQ/Smokehouse</option>
                                    <option value="burgers-fries">Burgers & Fries</option>
                                    <option value="pizza">Pizza</option>
                                    <option value="italian">Italian</option>
                                    <option value="chinese">Chinese</option>
                                    <option value="japanese">Japanese/Sushi</option>
                                    <option value="thai">Thai</option>
                                    <option value="vietnamese">Vietnamese</option>
                                    <option value="korean">Korean</option>
                                    <option value="indian">Indian</option>
                                    <option value="mexican">Mexican</option>
                                    <option value="latin-american">Latin American</option>
                                    <option value="caribbean">Caribbean</option>
                                    <option value="cuban">Cuban</option>
                                    <option value="haitian">Haitian</option>
                                    <option value="jamaican">Jamaican</option>
                                    <option value="peruvian">Peruvian</option>
                                    <option value="colombian">Colombian</option>
                                    <option value="argentinian">Argentinian</option>
                                    <option value="brazilian">Brazilian</option>
                                    <option value="mediterranean">Mediterranean</option>
                                    <option value="greek">Greek</option>
                                    <option value="middle-eastern">Middle Eastern</option>
                                    <option value="french">French</option>
                                    <option value="seafood">Seafood</option>
                                    <option value="steakhouse">Steakhouse</option>
                                    <option value="deli-sandwiches">Deli/Sandwiches</option>
                                    <option value="bakery-cafe">Bakery/Cafe</option>
                                    <option value="coffee-shop">Coffee Shop</option>
                                    <option value="ice-cream">Ice Cream/Desserts</option>
                                    <option value="sports-bar">Sports Bar/Tavern</option>
                                    <option value="pub-gastropub">Pub/Gastropub</option>
                                    <option value="nightclub">Nightclub/Lounge</option>
                                    <option value="fusion">Fusion</option>
                                    <option value="healthy-organic">Healthy/Organic</option>
                                    <option value="vegan-vegetarian">Vegan/Vegetarian</option>
                                    <option value="buffet">Buffet</option>
                                    <option value="cafeteria-style">Cafeteria Style</option>
                                    <option value="other-cuisine">Other Cuisine</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="totalHoodFans">Total Hood Fans</label>
                                <input type="number" id="totalHoodFans" min="0" max="50" placeholder="Number of hood fans">
                            </div>
                            <div class="form-group">
                                <label for="totalHoodFilters">Total Hood Filters</label>
                                <input type="number" id="totalHoodFilters" min="0" max="200" placeholder="Number of hood filters">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="buildingStories">Building Stories</label>
                                <select id="buildingStories">
                                    <option value="">Select Stories</option>
                                    <option value="1">1 Story</option>
                                    <option value="2">2 Stories</option>
                                    <option value="3">3 Stories</option>
                                    <option value="4-5">4-5 Stories</option>
                                    <option value="6-10">6-10 Stories</option>
                                    <option value="11-20">11-20 Stories</option>
                                    <option value="21+">21+ Stories (High-Rise)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cleaningDifficulty">Cleaning Difficulty Rating</label>
                                <select id="cleaningDifficulty">
                                    <option value="">Select Difficulty</option>
                                    <option value="ok-pass">‚úÖ OK/Pass - Clean & Well Maintained</option>
                                    <option value="light">üü° Light - Minor Buildup</option>
                                    <option value="medium">üü† Medium - Moderate Buildup</option>
                                    <option value="heavy">üî¥ Heavy - Significant Buildup</option>
                                    <option value="obscene">‚ö†Ô∏è Obscene - Health Hazard Level</option>
                                    <option value="should-close">üö® Should Be Closed - Extreme Violation</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="serviceFrequency">Service Frequency *</label>
                                <select id="serviceFrequency" required>
                                    <option value="">Select Frequency</option>
                                    <option value="monthly">Every Month</option>
                                    <option value="every-2-months">Every 2 Months</option>
                                    <option value="quarterly">Every 3 Months</option>
                                    <option value="every-4-months">Every 4 Months</option>
                                    <option value="semi-annual">Every 6 Months</option>
                                    <option value="annual">Once Per Year</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <!-- Empty for now, can add more fields later -->
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Service Scheduling Preferences</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="preferredTimeOfDay">Preferred Time of Day</label>
                                <select id="preferredTimeOfDay">
                                    <option value="">Select Preferred Time</option>
                                    <option value="early-morning">Early Morning (5:00 AM - 8:00 AM)</option>
                                    <option value="morning">Morning (8:00 AM - 12:00 PM)</option>
                                    <option value="afternoon">Afternoon (12:00 PM - 5:00 PM)</option>
                                    <option value="evening">Evening (5:00 PM - 10:00 PM)</option>
                                    <option value="night">Night (10:00 PM - 2:00 AM)</option>
                                    <option value="overnight">Overnight (2:00 AM - 5:00 AM)</option>
                                    <option value="anytime">Anytime (Flexible)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="preferredDays">Preferred Days of Week</label>
                                <select id="preferredDays">
                                    <option value="">Select Preferred Days</option>
                                    <option value="monday-friday">Monday - Friday (Weekdays)</option>
                                    <option value="saturday-sunday">Saturday - Sunday (Weekends)</option>
                                    <option value="monday-wednesday">Monday - Wednesday</option>
                                    <option value="thursday-sunday">Thursday - Sunday</option>
                                    <option value="specific-day">Specific Day Only</option>
                                    <option value="any-day">Any Day (Flexible)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="timeFlexibility">Time Flexibility</label>
                                <select id="timeFlexibility">
                                    <option value="">Select Flexibility</option>
                                    <option value="rigid-time">‚è∞ Rigid - Must be exact time</option>
                                    <option value="flexible-time">üïí Flexible - Can adjust time by 2-3 hours</option>
                                    <option value="very-flexible-time">‚è≥ Very Flexible - Any time works</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="dayFlexibility">Day Flexibility</label>
                                <select id="dayFlexibility">
                                    <option value="">Select Flexibility</option>
                                    <option value="rigid-day">üìÖ Rigid - Must be specific day</option>
                                    <option value="flexible-day">üìÜ Flexible - Can adjust by 1-2 days</option>
                                    <option value="very-flexible-day">üóìÔ∏è Very Flexible - Any day works</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Service History</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="startDate">Service Start Date *</label>
                                <input type="date" id="startDate" required>
                            </div>
                            <div class="form-group">
                                <label for="lastService">Last Service Date</label>
                                <input type="date" id="lastService">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="notes">Additional Notes</label>
                            <textarea id="notes" placeholder="Special requirements, access details, equipment notes, etc."></textarea>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 40px;">
                        <button type="button" class="btn" id="submitBtn">üíæ Save Customer</button>
                        <button type="button" class="btn btn-secondary" id="clearBtn" style="margin-left: 20px;">üóëÔ∏è Clear Form</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let customers = [];
        let currentEditingId = null;

        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('active');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Phone number formatting
        function formatPhoneNumber(value) {
            const phoneNumber = value.replace(/\D/g, '');
            
            if (phoneNumber.length >= 6) {
                return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3, 6)}-${phoneNumber.slice(6, 10)}`;
            } else if (phoneNumber.length >= 3) {
                return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3)}`;
            } else {
                return phoneNumber;
            }
        }

        function formatZipCode(value) {
            const zipCode = value.replace(/[^\d-]/g, '');
            
            if (zipCode.length > 5 && !zipCode.includes('-')) {
                return `${zipCode.slice(0, 5)}-${zipCode.slice(5, 9)}`;
            }
            return zipCode;
        }

        function initCleanMode() {
            console.log('Starting fresh customer management system...');
            customers = [];
            
            updateDashboard();
            displayAllCustomers();
            
            showNotification('Welcome to SUNBURST Hood Cleaning! Ready to add your first customer! üéâ', 'success');
        }

        function getDaysUntilNextService(lastServiceDate, frequency) {
            if (!lastServiceDate) return null;
            
            const last = new Date(lastServiceDate);
            const today = new Date();
            
            const frequencyDays = {
                'monthly': 30,
                'every-2-months': 60,
                'quarterly': 90,
                'every-4-months': 120,
                'semi-annual': 180,
                'annual': 365
            };
            
            const intervalDays = frequencyDays[frequency] || 90;
            const nextService = new Date(last.getTime() + (intervalDays * 24 * 60 * 60 * 1000));
            const timeDiff = nextService.getTime() - today.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            
            return daysDiff;
        }

        function getServiceStatus(customer) {
            const days = getDaysUntilNextService(customer.last_service, customer.service_frequency);
            
            if (days === null) {
                return { 
                    status: 'green', 
                    text: 'No Service Date', 
                    days: null, 
                    notification: 'üìÖ Set last service date to track schedule' 
                };
            }
            
            if (days < 0) {
                const overdueDays = Math.abs(days);
                return { 
                    status: 'red', 
                    text: 'OVERDUE', 
                    days: overdueDays, 
                    notification: `üö® ${overdueDays} day${overdueDays > 1 ? 's' : ''} overdue - Schedule ASAP!` 
                };
            }
            
            if (days <= 30) {
                return { 
                    status: 'yellow', 
                    text: 'DUE SOON', 
                    days: days, 
                    notification: `‚ö†Ô∏è ${days} day${days > 1 ? 's' : ''} until service due - Schedule soon` 
                };
            }
            
            return { 
                status: 'green', 
                text: 'CURRENT', 
                days: days, 
                notification: `‚úÖ ${days} day${days > 1 ? 's' : ''} until next service needed` 
            };
        }

        function getServiceLength(startDate) {
            if (!startDate) return 'Unknown';
            
            const start = new Date(startDate);
            const today = new Date();
            const diffTime = Math.abs(today - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 30) return `${diffDays} days`;
            if (diffDays < 365) return `${Math.floor(diffDays / 30)} months`;
            
            const years = Math.floor(diffDays / 365);
            const months = Math.floor((diffDays % 365) / 30);
            return `${years} year${years > 1 ? 's' : ''}${months > 0 ? `, ${months} month${months > 1 ? 's' : ''}` : ''}`;
        }

        function formatBusinessType(type) {
            return type.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        }

        function getDifficultyInfo(difficulty) {
            const difficultyMap = {
                'ok-pass': { icon: '‚úÖ', label: 'OK/Pass', color: '#28a745' },
                'light': { icon: 'üü°', label: 'Light', color: '#ffc107' },
                'medium': { icon: 'üü†', label: 'Medium', color: '#fd7e14' },
                'heavy': { icon: 'üî¥', label: 'Heavy', color: '#dc3545' },
                'obscene': { icon: '‚ö†Ô∏è', label: 'Obscene', color: '#6f42c1' },
                'should-close': { icon: 'üö®', label: 'Should Close', color: '#e83e8c' }
            };
            return difficultyMap[difficulty] || { icon: '‚ùì', label: 'Unknown', color: '#6c757d' };
        }

        function getTimeInfo(timeOfDay) {
            const timeMap = {
                'early-morning': 'üåÖ Early Morning (5-8 AM)',
                'morning': 'üåÑ Morning (8 AM-12 PM)',
                'afternoon': '‚òÄÔ∏è Afternoon (12-5 PM)',
                'evening': 'üåá Evening (5-10 PM)',
                'night': 'üåÉ Night (10 PM-2 AM)',
                'overnight': 'üåô Overnight (2-5 AM)',
                'anytime': '‚è∞ Anytime'
            };
            return timeMap[timeOfDay] || 'Not specified';
        }

        function createCustomerCard(customer) {
            const status = getServiceStatus(customer);
            const serviceLength = getServiceLength(customer.start_date);
            
            let nextServiceDate = '';
            if (customer.last_service && status.days !== null) {
                const last = new Date(customer.last_service);
                const frequencyDays = {
                    'monthly': 30,
                    'every-2-months': 60,
                    'quarterly': 90,
                    'every-4-months': 120,
                    'semi-annual': 180,
                    'annual': 365
                };
                const intervalDays = frequencyDays[customer.service_frequency] || 90;
                const nextService = new Date(last.getTime() + (intervalDays * 24 * 60 * 60 * 1000));
                nextServiceDate = nextService.toLocaleDateString();
            }
            
            const cardClass = status.status === 'yellow' ? 'due-soon' : 
                             status.status === 'red' ? 'overdue' : '';
            
            return `
                <div class="customer-card ${cardClass}" data-customer-id="${customer.id}">
                    <div class="status-badge ${status.status}">${status.text}</div>
                    <div class="customer-info">
                        <h3>üè¢ ${customer.business_name}</h3>
                        <p><strong>üë§ Contact:</strong> ${customer.contact_name}</p>
                        <p><strong>üìû Phone:</strong> ${customer.contact_phone}</p>
                        ${customer.contact_email ? `<p><strong>üìß Email:</strong> ${customer.contact_email}</p>` : ''}
                        <p><strong>üìç Address:</strong> ${customer.address}${customer.suite_number ? `, ${customer.suite_number}` : ''}</p>
                        <p><strong>üèôÔ∏è City:</strong> ${customer.city}, ${customer.state} ${customer.zip_code}</p>
                        <p><strong>üè™ Structure:</strong> ${formatBusinessType(customer.business_type)}</p>
                        ${customer.cuisine_type ? `<p><strong>üçΩÔ∏è Cuisine:</strong> ${formatBusinessType(customer.cuisine_type)}</p>` : ''}
                        ${customer.total_hood_fans ? `<p><strong>üåÄ Hood Fans:</strong> ${customer.total_hood_fans}</p>` : ''}
                        ${customer.total_hood_filters ? `<p><strong>üî≤ Hood Filters:</strong> ${customer.total_hood_filters}</p>` : ''}
                        ${customer.building_stories ? `<p><strong>üè¢ Building:</strong> ${customer.building_stories} ${customer.building_stories === '1' ? 'Story' : 'Stories'}</p>` : ''}
                        ${customer.cleaning_difficulty ? `<p><strong>üìä Difficulty:</strong> <span style="color: ${getDifficultyInfo(customer.cleaning_difficulty).color}">${getDifficultyInfo(customer.cleaning_difficulty).icon} ${getDifficultyInfo(customer.cleaning_difficulty).label}</span></p>` : ''}
                        <p><strong>üîÑ Frequency:</strong> ${formatBusinessType(customer.service_frequency)}</p>
                        ${customer.preferred_time_of_day ? `<p><strong>‚è∞ Preferred Time:</strong> ${getTimeInfo(customer.preferred_time_of_day)}</p>` : ''}
                        ${customer.preferred_days ? `<p><strong>üìÖ Preferred Days:</strong> ${formatBusinessType(customer.preferred_days)}</p>` : ''}
                        <p><strong>‚è±Ô∏è Customer Since:</strong> ${serviceLength}</p>
                        ${customer.last_service ? `<p><strong>üßΩ Last Service:</strong> ${new Date(customer.last_service).toLocaleDateString()}</p>` : ''}
                        ${nextServiceDate ? `<p><strong>üìÖ Next Service Due:</strong> ${nextServiceDate}</p>` : ''}
                        <div class="service-notification">
                            <strong>${status.notification}</strong>
                        </div>
                        ${customer.notes ? `<p><strong>üìù Notes:</strong> ${customer.notes}</p>` : ''}
                    </div>
                    <div class="customer-actions">
                        <button class="btn btn-small" onclick="editCustomer(${customer.id})">‚úèÔ∏è Edit</button>
                        <button class="btn btn-small" onclick="markServiced(${customer.id})">‚úÖ Mark Serviced</button>
                        <button class="btn btn-danger btn-small" onclick="confirmDeleteCustomer(${customer.id})">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `;
        }

        function updateDashboard() {
            const stats = {
                total: customers.length,
                dueSoon: 0,
                dueNow: 0,
                overdue: 0
            };
            
            const urgentCustomers = [];
            
            customers.forEach(customer => {
                const status = getServiceStatus(customer);
                if (status.status === 'yellow') {
                    stats.dueSoon++;
                    urgentCustomers.push(customer);
                } else if (status.status === 'red') {
                    stats.overdue++;
                    urgentCustomers.push(customer);
                }
            });
            
            urgentCustomers.sort((a, b) => {
                const statusA = getServiceStatus(a);
                const statusB = getServiceStatus(b);
                
                if (statusA.status === 'red' && statusB.status !== 'red') return -1;
                if (statusB.status === 'red' && statusA.status !== 'red') return 1;
                
                if (statusA.days !== null && statusB.days !== null) {
                    return statusA.days - statusB.days;
                }
                
                return 0;
            });
            
            document.getElementById('totalCustomers').textContent = stats.total;
            document.getElementById('dueSoon').textContent = stats.dueSoon;
            document.getElementById('dueNow').textContent = stats.dueSoon;
            document.getElementById('overdue').textContent = stats.overdue;
            
            const urgentContainer = document.getElementById('urgentCustomers');
            if (urgentCustomers.length === 0) {
                urgentContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">üéâ</div>
                        <h3>All Customers Are Current!</h3>
                        <p>Great job! No urgent attention needed at this time.</p>
                    </div>
                `;
            } else {
                urgentContainer.innerHTML = urgentCustomers.map(customer => createCustomerCard(customer)).join('');
            }
        }

        function displayAllCustomers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const businessTypeFilter = document.getElementById('businessTypeFilter').value;
            
            let filteredCustomers = [...customers];
            
            if (searchTerm) {
                filteredCustomers = filteredCustomers.filter(customer => 
                    customer.business_name.toLowerCase().includes(searchTerm) ||
                    customer.contact_name.toLowerCase().includes(searchTerm) ||
                    customer.city.toLowerCase().includes(searchTerm) ||
                    customer.contact_phone.includes(searchTerm)
                );
            }
            
            if (statusFilter) {
                filteredCustomers = filteredCustomers.filter(customer => {
                    const status = getServiceStatus(customer);
                    return status.status === statusFilter;
                });
            }
            
            if (businessTypeFilter) {
                filteredCustomers = filteredCustomers.filter(customer => 
                    customer.business_type === businessTypeFilter
                );
            }
            
            const cuisineTypeFilter = document.getElementById('cuisineTypeFilter').value;
            if (cuisineTypeFilter) {
                filteredCustomers = filteredCustomers.filter(customer => 
                    customer.cuisine_type === cuisineTypeFilter
                );
            }

            filteredCustomers.sort((a, b) => {
                const statusA = getServiceStatus(a);
                const statusB = getServiceStatus(b);
                
                const priorityOrder = { 'red': 3, 'yellow': 2, 'green': 1 };
                const priorityDiff = priorityOrder[statusB.status] - priorityOrder[statusA.status];
                
                if (priorityDiff !== 0) return priorityDiff;
                
                return a.business_name.localeCompare(b.business_name);
            });
            
            const container = document.getElementById('allCustomers');
            if (filteredCustomers.length === 0) {
                const emptyMessage = searchTerm || statusFilter || businessTypeFilter 
                    ? 'No customers found matching your search criteria.'
                    : 'No customers added yet. Add your first customer to get started!';
                
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">üîç</div>
                        <h3>No Results Found</h3>
                        <p>${emptyMessage}</p>
                    </div>
                `;
            } else {
                container.innerHTML = filteredCustomers.map(customer => createCustomerCard(customer)).join('');
            }
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            if (tabName === 'dashboard') {
                updateDashboard();
            } else if (tabName === 'customers') {
                displayAllCustomers();
            }
        }

        async function handleFormSubmit() {
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'üíæ Saving...';
            submitBtn.disabled = true;
            
            try {
                const formData = {
                    business_name: document.getElementById('businessName').value.trim(),
                    contact_name: document.getElementById('contactName').value.trim(),
                    contact_phone: document.getElementById('contactPhone').value.trim(),
                    contact_email: document.getElementById('contactEmail').value.trim() || null,
                    address: document.getElementById('address').value.trim(),
                    suite_number: document.getElementById('suiteNumber').value.trim() || null,
                    city: document.getElementById('city').value.trim(),
                    state: document.getElementById('state').value.trim(),
                    zip_code: document.getElementById('zipCode').value.trim(),
                    business_type: document.getElementById('businessType').value,
                    cuisine_type: document.getElementById('cuisineType').value || null,
                    total_hood_fans: document.getElementById('totalHoodFans').value || null,
                    total_hood_filters: document.getElementById('totalHoodFilters').value || null,
                    building_stories: document.getElementById('buildingStories').value || null,
                    cleaning_difficulty: document.getElementById('cleaningDifficulty').value || null,
                    service_frequency: document.getElementById('serviceFrequency').value,
                    preferred_time_of_day: document.getElementById('preferredTimeOfDay').value || null,
                    preferred_days: document.getElementById('preferredDays').value || null,
                    time_flexibility: document.getElementById('timeFlexibility').value || null,
                    day_flexibility: document.getElementById('dayFlexibility').value || null,
                    start_date: document.getElementById('startDate').value,
                    last_service: document.getElementById('lastService').value || null,
                    notes: document.getElementById('notes').value.trim() || null
                };
                
                // Basic validation
                if (!formData.business_name || !formData.contact_name || !formData.contact_phone || 
                    !formData.address || !formData.city || !formData.zip_code || 
                    !formData.business_type || !formData.service_frequency || !formData.start_date) {
                    throw new Error('Please fill in all required fields');
                }
                
                if (currentEditingId) {
                    const customerIndex = customers.findIndex(c => c.id === currentEditingId);
                    if (customerIndex !== -1) {
                        customers[customerIndex] = { ...formData, id: currentEditingId };
                    }
                    showNotification('Customer updated successfully!', 'success');
                } else {
                    const newCustomer = { ...formData, id: Date.now() };
                    customers.push(newCustomer);
                    showNotification('Customer added successfully!', 'success');
                }
                
                updateDashboard();
                displayAllCustomers();
                
                currentEditingId = null;
                clearForm();
                showTab('customers');
                
            } catch (error) {
                console.error('Error saving customer:', error);
                showNotification(error.message || 'Error saving customer. Please try again.', 'error');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        }

        function clearForm() {
            document.getElementById('businessName').value = '';
            document.getElementById('contactName').value = '';
            document.getElementById('contactPhone').value = '';
            document.getElementById('contactEmail').value = '';
            document.getElementById('address').value = '';
            document.getElementById('suiteNumber').value = '';
            document.getElementById('city').value = '';
            document.getElementById('state').value = 'FL';
            document.getElementById('zipCode').value = '';
            document.getElementById('businessType').value = '';
            document.getElementById('cuisineType').value = '';
            document.getElementById('totalHoodFans').value = '';
            document.getElementById('totalHoodFilters').value = '';
            document.getElementById('buildingStories').value = '';
            document.getElementById('cleaningDifficulty').value = '';
            document.getElementById('serviceFrequency').value = '';
            document.getElementById('preferredTimeOfDay').value = '';
            document.getElementById('preferredDays').value = '';
            document.getElementById('timeFlexibility').value = '';
            document.getElementById('dayFlexibility').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('lastService').value = '';
            document.getElementById('notes').value = '';
            
            currentEditingId = null;
            document.getElementById('submitBtn').textContent = 'üíæ Save Customer';
        }

        async function markServiced(customerId) {
            try {
                const today = new Date().toISOString().split('T')[0];
                
                const customer = customers.find(c => c.id === customerId);
                if (customer) {
                    customer.last_service = today;
                    updateDashboard();
                    displayAllCustomers();
                    showNotification('Customer marked as serviced!', 'success');
                }
            } catch (error) {
                console.error('Error updating customer:', error);
                showNotification('Error updating customer. Please try again.', 'error');
            }
        }

        function editCustomer(customerId) {
            const customer = customers.find(c => c.id === customerId);
            if (!customer) return;
            
            document.getElementById('businessName').value = customer.business_name || '';
            document.getElementById('contactName').value = customer.contact_name || '';
            document.getElementById('contactPhone').value = customer.contact_phone || '';
            document.getElementById('contactEmail').value = customer.contact_email || '';
            document.getElementById('address').value = customer.address || '';
            document.getElementById('suiteNumber').value = customer.suite_number || '';
            document.getElementById('city').value = customer.city || '';
            document.getElementById('state').value = customer.state || 'FL';
            document.getElementById('zipCode').value = customer.zip_code || '';
            document.getElementById('businessType').value = customer.business_type || '';
            document.getElementById('cuisineType').value = customer.cuisine_type || '';
            document.getElementById('totalHoodFans').value = customer.total_hood_fans || '';
            document.getElementById('totalHoodFilters').value = customer.total_hood_filters || '';
            document.getElementById('buildingStories').value = customer.building_stories || '';
            document.getElementById('cleaningDifficulty').value = customer.cleaning_difficulty || '';
            document.getElementById('serviceFrequency').value = customer.service_frequency || '';
            document.getElementById('preferredTimeOfDay').value = customer.preferred_time_of_day || '';
            document.getElementById('preferredDays').value = customer.preferred_days || '';
            document.getElementById('timeFlexibility').value = customer.time_flexibility || '';
            document.getElementById('dayFlexibility').value = customer.day_flexibility || '';
            document.getElementById('startDate').value = customer.start_date || '';
            document.getElementById('lastService').value = customer.last_service || '';
            document.getElementById('notes').value = customer.notes || '';
            
            currentEditingId = customerId;
            document.getElementById('submitBtn').textContent = 'üíæ Update Customer';
            
            showTab('add-customer');
            showNotification('Customer loaded for editing', 'success');
        }

        function confirmDeleteCustomer(customerId) {
            const customer = customers.find(c => c.id === customerId);
            if (!customer) return;
            
            if (confirm(`Are you sure you want to delete ${customer.business_name}?\n\nThis action cannot be undone.`)) {
                deleteCustomerById(customerId);
            }
        }

        async function deleteCustomerById(customerId) {
            try {
                customers = customers.filter(c => c.id !== customerId);
                updateDashboard();
                displayAllCustomers();
                showNotification('Customer deleted successfully!', 'success');
            } catch (error) {
                console.error('Error deleting customer:', error);
                showNotification('Error deleting customer. Please try again.', 'error');
            }
        }

        function initializeApp() {
            console.log('Initializing Hood Cleaning App...');
            initCleanMode();
            console.log('Application initialization complete');
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Setup phone number formatting
            const phoneInput = document.getElementById('contactPhone');
            phoneInput.addEventListener('input', function(e) {
                const formatted = formatPhoneNumber(e.target.value);
                e.target.value = formatted;
            });

            // Setup ZIP code formatting
            const zipInput = document.getElementById('zipCode');
            zipInput.addEventListener('input', function(e) {
                const formatted = formatZipCode(e.target.value);
                e.target.value = formatted;
            });

            // Set Florida as default state
            document.getElementById('state').value = 'FL';

            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    showTab(e.target.dataset.tab);
                });
            });

            document.getElementById('submitBtn').addEventListener('click', handleFormSubmit);
            document.getElementById('clearBtn').addEventListener('click', clearForm);

            document.getElementById('searchInput').addEventListener('input', displayAllCustomers);
            document.getElementById('statusFilter').addEventListener('change', displayAllCustomers);
            document.getElementById('businessTypeFilter').addEventListener('change', displayAllCustomers);
            document.getElementById('cuisineTypeFilter').addEventListener('change', displayAllCustomers);

            initializeApp();
        });
    </script>
</body>
</html>
